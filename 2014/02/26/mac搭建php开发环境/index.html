<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Mac搭建php开发环境 | sgsheg</title>
  <meta name="author" content="sgsheg">
  
  <meta name="description" content="做一个靠谱的IT男!">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <meta property="og:title" content="Mac搭建php开发环境"/>
  <meta property="og:site_name" content="sgsheg"/>

  <link rel="alternate" href="/atom.xml" title="sgsheg" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  
</head>


<body>
  <div class="wrapper">
    <header id="header"><div class="title">
  <h1><a href="/">sgsheg</a></h1>
  <p><a href="/">just for fun!!</a></p>
</div>
<nav class="nav">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <time datetime="2014-02-26T09:39:47.000Z"><a href="/2014/02/26/mac搭建php开发环境/">2月 26 2014</a></time>
    
    
  
    <h1 class="title">Mac搭建php开发环境</h1>
  

  </header>
  
  <div class="entry">
    
      <ol>
<li><p>基础</p>
<ul>
<li><p>我的版本为10.9</p>
</li>
<li><p>自带了php和apache,但是缺少mysql。在terminal查看php版本和apache</p>
</li>
</ul>
</li>
</ol>
<pre><code>    // 查看php版本

    sundeMacBook-Air:~ sun$ php --version
    PHP 5.4.17 (cli) (built: Aug 25 2013 02:03:38)
    Copyright (c) 1997-2013 The PHP Group
    Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies

    // 查看apache版本

    sundeMacBook-Air:~ sun$ httpd -v
    Server version: Apache/2.2.24 (Unix)
    Server built:   Aug 24 2013 21:10:43
</code></pre><a id="more"></a>

<ol>
<li><p>安装brew来安装mysql</p>
<ul>
<li><p>安装brew</p>
<pre><code>  // 安装brew [brew官网](http://brew.sh/)

  ruby -e &quot;$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)&quot;
</code></pre></li>
<li><p>使用brew</p>
<pre><code>  // brew 常用命令

  brew --h    // 帮助
  brew list   // 列出安装的
  brew install //安装
</code></pre></li>
<li><p>安装git</p>
<pre><code>  brew install git
</code></pre></li>
<li><p>安装mysql,需要git支持</p>
<pre><code>  //查看mysql存在的版本
  brew versions mysql

  Warning: brew-versions is unsupported and may be removed soon.Please use the homebrew-versions tap instead:
  https://github.com/Homebrew/homebrew-versions
  5.6.16   git checkout e7a0af8 Library/Formula/mysql.rb
  5.6.15   git checkout b8a121e Library/Formula/mysql.rb
  5.6.14   git checkout dc5d10c Library/Formula/mysql.rb
  5.6.13   git checkout dcc7f40 Library/Formula/mysql.rb
  5.6.12   git checkout ed829a3 Library/Formula/mysql.rb
  5.6.10   git checkout 48f7e86 Library/Formula/mysql.rb
  5.5.29   git checkout 336c976 Library/Formula/mysql.rb
  5.5.28   git checkout 5825f62 Library/Formula/mysql.rb
  5.5.27   git checkout 93aecfa Library/Formula/mysql.rb
  5.5.25a  git checkout faaa6c1 Library/Formula/mysql.rb
  5.5.25   git checkout 5bcd1f3 Library/Formula/mysql.rb
  5.5.24   git checkout a977fbd Library/Formula/mysql.rb
  5.5.20   git checkout f4009ef Library/Formula/mysql.rb
  5.5.19   git checkout c2b8e87 Library/Formula/mysql.rb
  5.5.15   git checkout 513c0f8 Library/Formula/mysql.rb
  5.5.14   git checkout a840c4a Library/Formula/mysql.rb
  5.5.12   git checkout 35b60ca Library/Formula/mysql.rb
  5.5.10   git checkout 1f2b24e Library/Formula/mysql.rb
  5.1.56   git checkout feae63a Library/Formula/mysql.rb
  5.1.55   git checkout 0476235 Library/Formula/mysql.rb
  5.1.54   git checkout 7077f84 Library/Formula/mysql.rb
  5.1.53   git checkout fbee3a0 Library/Formula/mysql.rb
  5.1.52   git checkout 7871a99 Library/Formula/mysql.rb
  5.1.51   git checkout 0fc5ce3 Library/Formula/mysql.rb
  5.1.49   git checkout 2e7d624 Library/Formula/mysql.rb
  5.1.48   git checkout 75def21 Library/Formula/mysql.rb
  5.1.47   git checkout 9d73887 Library/Formula/mysql.rb
  5.1.46   git checkout ee9ecec Library/Formula/mysql.rb
  5.1.45   git checkout 1ca6b6b Library/Formula/mysql.rb
  5.1.44   git checkout 052d1f2 Library/Formula/mysql.rb
  5.1.43   git checkout c4decd7 Library/Formula/mysql.rb

  // 安装
  brew install mysql
</code></pre></li>
</ul>
</li>
<li><p>配置apache</p>
<ul>
<li><p>apache的常用命令</p>
<pre><code>   sudo apachectl start        
   sudo apachectl restart
   sudo apachectl stop
</code></pre></li>
<li><p>修改httpd.conf，自定义站点</p>
<pre><code>  DocumentRoot &quot;/Users/username/Sites&quot;
  &lt;Directory /&gt;
      Options Indexes MultiViews
      AllowOverride All
      Order allow,deny
      Allow from all
  &lt;/Directory&gt;
</code></pre></li>
<li><p>启动php解析</p>
<pre><code>  LoadModule php5_module libexec/apache2/libphp5.so”    //把前面的#号去掉
</code></pre></li>
<li><p>重启apache</p>
<pre><code>  sudo apachectl restart
</code></pre></li>
</ul>
</li>
<li><p>配置mysql</p>
<ul>
<li><p>启动</p>
<pre><code>  mysql.server start
</code></pre></li>
<li><p>更改密码</p>
<pre><code>  // 更新数据库记录，password函数来进行加密生成

  mysql&gt; use mysql;
  mysql&gt; update user set password = password(&quot;new_password&quot;) where user = &quot;user_name&quot;;
  mysql&gt; flush privileges;
</code></pre></li>
</ul>
</li>
<li><p>安装mongodb</p>
<ul>
<li><p>安装</p>
<pre><code>  brew install mongodb
</code></pre></li>
<li><p>启动</p>
<pre><code>  mongod --fork
</code></pre></li>
<li><p>检查</p>
<pre><code>  sundeMacBook-Air:~ sun$ mongo --version
  MongoDB shell version: 2.4.9
</code></pre></li>
</ul>
</li>
</ol>
<ol>
<li><p>安装nodejs</p>
<ul>
<li><p>安装</p>
<pre><code>  brew install nodejs
</code></pre></li>
<li><p>检查</p>
<pre><code>  sundeMacBook-Air:~ sun$ node --version
  v0.10.26
  sundeMacBook-Air:~ sun$ npm --version
  1.4.3
</code></pre></li>
</ul>
</li>
<li><p>安装phpmyadmin</p>
<ul>
<li><p>下载phpmyadmin <a href="http://www.phpmyadmin.net/home_page/index.php" target="_blank">phpmyadmin</a></p>
</li>
<li><p>安装</p>
<pre><code>  mv Downloads/phpmyadmin Sites/ 

  cd phpmydmin;

  mkdir -p config

  // 浏览器进入phpmyadmin

  // 2002错误，就是找不到mysql.sock的问题，用下面方法解决

  sudo mkdir /var/mysql
  sudo ln -s /tmp/mysql.sock /var/mysql/mysql.sock
</code></pre></li>
</ul>
</li>
<li><p>安装nginx</p>
<ul>
<li><p>安装</p>
<pre><code>  brew install nginx
</code></pre></li>
<li><p>配置</p>
</li>
</ul>
</li>
</ol>
<pre><code>        cd /usr/local/etc/nginx/
        mkdir conf.d
        vim nginx.conf
        vim ./conf.d/default.conf


        //nginx.conf

        worker_processes  1;  

        error_log       /usr/local/var/log/nginx/error.log warn;

        pid        /usr/local/var/run/nginx.pid;

        events {
            worker_connections  256;
        }

        http {
            include       mime.types;
            default_type  application/octet-stream;

            log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;
                              &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;
                              &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;

            access_log      /usr/local/var/log/nginx/access.log main;
            port_in_redirect off;
            sendfile        on; 
            keepalive_timeout  65; 

            include /usr/local/etc/nginx/conf.d/*.conf; //在conf.d创建了一个defautl.conf
        }

        //default.conf

        server {
            listen       8080;
            server_name  localhost;

            root /Users/user_name/nginx_sites/; # 该项要修改为你准备存放相关网页的路径

            location / { 
                index index.php;
                autoindex on; 
            }   

            #proxy the php scripts to php-fpm  
            location ~ \.php$ {
                include /usr/local/etc/nginx/fastcgi.conf;
                fastcgi_intercept_errors on; 
                fastcgi_pass   127.0.0.1:9000; 
            }   

        }
</code></pre><ol>
<li><p>配置php-fpm</p>
<ul>
<li><p>Mac OSX 10.9的系统自带了PHP、php-fpm，省去了安装php-fpm的麻烦。 需要简单地修改下php-fpm的配置，否则运行php-fpm会报错。</p>
<pre><code>  sudo cp /private/etc/php-fpm.conf.default /private/etc/php-fpm.conf

  vim /private/etc/php-fpm.conf
</code></pre></li>
</ul>
</li>
</ol>
<pre><code>        //修改php-fpm.conf文件中的error_log项，默认该项被注释掉，去注释并且修改为

        error_log = /usr/local/var/log/php-fpm.log //如果不修改该值，运行php-fpm的时候会提示log文件输出路径不存在的错误。
</code></pre><ol>
<li><p>测试nginx服务</p>
<ul>
<li><p>启动nginx服务，nginx； </p>
</li>
<li><p>启动php服务，php-fpm； </p>
</li>
<li><p>在浏览器地址栏中输入localhost:8080，如果配置正确地话，应该能看到PHP相关信息的页面</p>
</li>
<li><p>如果提醒被占用，那么需要查看端口或者更改default.conf里面的端口</p>
</li>
</ul>
</li>
</ol>
<pre><code>        // 查看端口
        netstat -an | grep 8080
</code></pre><ol>
<li><p>参考</p>
<ul>
<li><p><a href="http://my.oschina.net/chen0dgax/blog/190161" target="_blank">Mac OSX 10.9搭建nginx+mysql+php-fpm环境</a></p>
</li>
<li><p><a href="http://chen-shan.net/?p=1463" target="_blank">Installing Nginx and PHP-FPM on Mac OS X</a></p>
</li>
<li><p><a href="http://www.handcraftedsoftware.net/articles/installing-nginx-php-fpm-and-apc-on-mac-os-x" target="_blank">Installing Nginx, PHP-FPM and APC on Mac OS X</a></p>
</li>
<li><p><a href="http://dhq.me/mac-install-nginx-mysql-php-fpm" target="_blank">Mac下nginx、mysql、php-fpm的安装配置</a></p>
</li>
<li><p><a href="http://www.nabito.net/hot-to-install-nginx-php-fpm-5-5-6-mongo-and-mysql-on-mac-with-homebrew/" target="_blank">Hot to install nginx, PHP-fpm 5.5.6, mongo and MySql on mac with homebrew</a></p>
</li>
<li><p><a href="http://yansu.org/2013/12/11/lamp-in-mac.html" target="_blank">Mac下用brew搭建PHP(LNMP/LAMP)开发环境</a></p>
</li>
</ul>
</li>
</ol>

    
  </div>
  <footer>
    
      
      
    
    <div class="clearfix"></div>
  </footer>
</article>


<section id="comment">
  <h1 class="title">留言</h1>
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</div>
  </div>
  <div class="widget-wrapper">
    <aside id="sidebar">
  
  
    
      
      
    
      
      

<div class="widget tag first">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/css,性能/">css,性能</a><small>1</small></li>
  
    <li><a href="/tags/css3/">css3</a><small>1</small></li>
  
    <li><a href="/tags/emacs,begin/">emacs,begin</a><small>1</small></li>
  
    <li><a href="/tags/fonts,font-size/">fonts,font-size</a><small>1</small></li>
  
    <li><a href="/tags/linux配置查询/">linux配置查询</a><small>1</small></li>
  
    <li><a href="/tags/nginx/">nginx</a><small>1</small></li>
  
    <li><a href="/tags/scp,ssh/">scp,ssh</a><small>1</small></li>
  
    <li><a href="/tags/ubuntu/">ubuntu</a><small>1</small></li>
  
    <li><a href="/tags/ubuntu,tip/">ubuntu,tip</a><small>1</small></li>
  
    <li><a href="/tags/ubuntu,解压/">ubuntu,解压</a><small>1</small></li>
  
    <li><a href="/tags/个人成长/">个人成长</a><small>1</small></li>
  
    <li><a href="/tags/代码,编程,未来,lisp/">代码,编程,未来,lisp</a><small>1</small></li>
  
    <li><a href="/tags/代码的未来/">代码的未来</a><small>1</small></li>
  
    <li><a href="/tags/响应式设计/">响应式设计</a><small>1</small></li>
  
    <li><a href="/tags/我编程,我快乐/">我编程,我快乐</a><small>1</small></li>
  
    <li><a href="/tags/敬畏之心/">敬畏之心</a><small>1</small></li>
  
    <li><a href="/tags/新年你好/">新年你好</a><small>1</small></li>
  
  </ul>
</div>

    
      
      

<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/css,性能/" style="font-size: NaNpx;">css,性能</a><a href="/tags/css3/" style="font-size: NaNpx;">css3</a><a href="/tags/emacs,begin/" style="font-size: NaNpx;">emacs,begin</a><a href="/tags/fonts,font-size/" style="font-size: NaNpx;">fonts,font-size</a><a href="/tags/linux配置查询/" style="font-size: NaNpx;">linux配置查询</a><a href="/tags/nginx/" style="font-size: NaNpx;">nginx</a><a href="/tags/scp,ssh/" style="font-size: NaNpx;">scp,ssh</a><a href="/tags/ubuntu/" style="font-size: NaNpx;">ubuntu</a><a href="/tags/ubuntu,tip/" style="font-size: NaNpx;">ubuntu,tip</a><a href="/tags/ubuntu,解压/" style="font-size: NaNpx;">ubuntu,解压</a><a href="/tags/个人成长/" style="font-size: NaNpx;">个人成长</a><a href="/tags/代码,编程,未来,lisp/" style="font-size: NaNpx;">代码,编程,未来,lisp</a><a href="/tags/代码的未来/" style="font-size: NaNpx;">代码的未来</a><a href="/tags/响应式设计/" style="font-size: NaNpx;">响应式设计</a><a href="/tags/我编程,我快乐/" style="font-size: NaNpx;">我编程,我快乐</a><a href="/tags/敬畏之心/" style="font-size: NaNpx;">敬畏之心</a><a href="/tags/新年你好/" style="font-size: NaNpx;">新年你好</a>
  </div>
</div>

    
      
      

<div class="widget recent-posts">
  <h3 class="title">最近的文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2014/02/26/mac搭建php开发环境/">Mac搭建php开发环境</a>
      </li>
    
      <li>
        <a href="/2014/02/22/再看提升网站性能最佳实践/">再看提升网站性能最佳实践</a>
      </li>
    
      <li>
        <a href="/2014/02/19/2014-02-19-website-developer/">那些开发中使用到的资源网站</a>
      </li>
    
      <li>
        <a href="/2014/01/08/2014-01-08-代码的未来下/">《代码的未来》阅读下</a>
      </li>
    
      <li>
        <a href="/2014/01/06/2014-01-06-代码的未来阅读笔记上/">代码的未来阅读笔记&lt;上&gt;</a>
      </li>
    
  </ul>
</div>

    
      
      

<div class="widget blogroll first newline">
  <h3 class="title">友情链接</h3>
  <ul class="entry">
  
    
    <li><a href="http://heroicyang.com/" target="_blank">Heroic Yang&#39;s Blog</a></li>
  
  </ul>
</div>

    
  
</aside>
<div class="clearfix"></div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2014 <a href="/">sgsheg</a>
  
</div>
<div class="theme-copyright">
  I am sgsheg!
</div>
<div class="clearfix"></div>
</footer>
  <script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var disqus_shortname = 'sgsheg';

  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>